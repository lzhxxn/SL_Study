"use strict";_SL.nmspc("login").form=function(){var a={form:"[name=formLogin]",userId:"[name=userId]",userPswd:"[name=userPswd]",checkSave:"[name=checkSave]",btnLogin:".btn-login",capslock:".capslock",cookieUserId:"saveUserId",urlLogin:gCONTEXT_PATH+"login/login.do",urlGetKey:gCONTEXT_PATH+"login/get_key.json",urlUserInfo:gCONTEXT_PATH+"login/user_info.json",urlForm:gCONTEXT_PATH+"login/apply_form.html",urlIdcheck:gCONTEXT_PATH+"login/idcheck_form.html",urlPwdcheck:gCONTEXT_PATH+"login/pwdcheck_form.html",btnApply:".btn-apply",idCheck:".btn-idcheck",pwdCheck:".btn-pwdcheck"},b={form:$(a.form),userId:$(a.userId),userPswd:$(a.userPswd),checkSave:$(a.checkSave),btnLogin:$(a.btnLogin),capslock:$(a.capslock),btnIdcheck:$(a.idCheck),btnPwdcheck:$(a.pwdCheck),btnApply:$(a.btnApply)},c=function(a){13==a.keyCode&&d()},d=function(c){var d={};if($("body").requestData(a.urlGetKey,{},{async:!1,callback:function(c){var e=new RSAKey;e.setPublic(c.publicKeyModulus,c.publicKeyExponent),$("body").requestData(a.urlUserInfo,{userId:e.encrypt(b.userId.val())},{async:!1,callback:function(a,b,c){d=a}})}}),""==d.passwd){!function(){var c={user_id:b.userId.val(),user_nm:d.user_nm,tel_no:d.tel_no,mobile_no:d.mobile_no,pwd:0,msg:"비밀번호를 설정해주세요."};new ModalPopup(gCONTEXT_PATH+"login/pwdcheck_form.html",{height:185,width:400,data:c,onClose:function(){b.userPswd.val(slapp.login.pwdForm.getPswd()),b.checkSave.prop("checked")?$.cookie(a.cookieUserId,b.userId.val(),{expires:30}):$.cookie(a.cookieUserId,""),e(!1),null==$.cookie(b.userId.val())?($.cookie(b.userId.val(),!0,{expires:3650,path:"/"}),$.cookie("USERID",b.userId.val(),{expires:3650,path:"/"}),$.cookie("settingClose",!0,{expires:3650,path:"/"})):($.cookie("USERID",b.userId.val(),{expires:3650,path:"/"}),$.cookie("settingClose",!0,{expires:3650,path:"/"}))}})}()}else{if(!_SL.validate())return;b.checkSave.prop("checked")?$.cookie(a.cookieUserId,b.userId.val(),{expires:30}):$.cookie(a.cookieUserId,""),e(!1),null==$.cookie(b.userId.val())?($.cookie(b.userId.val(),!0,{expires:3650,path:"/"}),$.cookie("USERID",b.userId.val(),{expires:3650,path:"/"}),$.cookie("settingClose",!0,{expires:3650,path:"/"})):($.cookie("USERID",b.userId.val(),{expires:3650,path:"/"}),$.cookie("settingClose",!0,{expires:3650,path:"/"}))}},e=function(c){$("body").requestData(a.urlGetKey,{},{callback:function(a){var d=new RSAKey;d.setPublic(a.publicKeyModulus,a.publicKeyExponent);var e=d.encrypt(b.userId.val()),g=d.encrypt(b.userPswd.val());f(c,e,g)}})},f=function(c,d,f){var g=function(b){var c=$.cookie(a.cookieUserId);c=b.loginUrl&&""!=b.loginUrl?b.loginUrl:gCONTEXT_PATH,b.popupNotice&&(c+=(-1==c.indexOf("?")?"?":"&")+"popupNotice=Y"),location.href=c},h={userId:d,userPswd:f,forceLogin:c?"Y":"N",slKey:gSlKey};$("body").requestData(a.urlLogin,h,{callback:function(c,d,f){switch(d){case"SUC.LI.0001":g(c);break;case"WRN.LI.0006":_alert(f,{onAgree:function(){g(c)}});break;case"WRN.LI.0007":var h={user_id:b.userId.val(),passwd:b.userPswd.val(),user_nm:c.user_nm,tel_no:c.tel_no,mobile_no:c.mobile_no,msg:f};new ModalPopup(gCONTEXT_PATH+"interface/comuser_pwd_form.html",{height:185,width:400,data:h,onClose:function(){b.userPswd.val(slapp.login.pwdForm.getPswd()),e(!1)}});break;case"WRN.LI.0008":_alert(f,{onAgree:function(){new ModalPopup(a.urlPwdcheck,{height:210,onClose:function(){refresh()}})}});break;case"CNF.LI.0001":_confirm(f,{onAgree:function(){e(!0)}});break;default:_alert(f)}}})};!function(){var e;if(slui.notices.licence(),b.userId.on("keydown",c),b.userPswd.on("keydown",c),b.btnLogin.on("click",d).on("keyup",c),b.btnApply.on("click",function(){new ModalPopup(a.urlForm,{height:650,onClose:function(){refresh()}})}),b.btnIdcheck.on("click",function(){new ModalPopup(a.urlIdcheck,{height:170,onClose:function(){refresh()}})}),b.btnPwdcheck.on("click",function(){new ModalPopup(a.urlPwdcheck,{height:170,onClose:function(){refresh()}})}),$("#userPswd").bind("keyup",function(a){a.originalEvent.getModifierState("CapsLock")?($(".loginCapsLock").show(),$("#capslock").show(),$(".loginCapsLock").delay(1500).fadeOut("fast"),$("#capslock").delay(1500).fadeOut("fast")):($(".loginCapsLock").hide(),$("#capslock").hide())}),""==b.userId.val()){if(!(e=$.cookie(a.cookieUserId)))return void b.userId.focus();b.userId.val(e),b.checkSave.prop("checked",!0)}b.userPswd.focus()}()}();