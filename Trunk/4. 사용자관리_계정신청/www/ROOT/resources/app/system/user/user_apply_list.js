"use strict";_SL.nmspc("user").list=function(){var a={urlList:gCONTEXT_PATH+"system/user_apply_list.json",urlForm:gCONTEXT_PATH+"system/user_apply_form.html",formId:"#searchUserList",gridId:"#gridApplyList"},b={form:$(a.formId),grid:$(a.gridId)},c=new slui.cookies,d=function(){c.init(a.gridId);var d=b.grid.parent().siblings(".grid-bottom").find(".btn-add");b.form.find("[name=s_group_cd]").chosen({search_contains:!0,width:"100%"}),e(b.grid),b.form.find(".form-submit").off().on("click",function(){b.grid.jqxGrid("gotopage",0),f()}),b.form.find(".form-input").keypress(function(a){13==a.keyCode&&(b.grid.jqxGrid("gotopage",0),f())}),d.off().on("click",function(){g(a.urlForm)})},e=function(b){var d={datatype:"json",datafields:[{name:"user_id",type:"string"},{name:"user_nm",type:"string"},{name:"mobile_no",type:"string"},{name:"mail_addr",type:"string"},{name:"role_nm",type:"string"},{name:"group_nm",type:"string"},{name:"cust_nm",type:"string"},{name:"reg_dt",type:"string"},{name:"user_img",type:"string"},{name:"apply_status",type:"string"}],root:"rows",beforeprocessing:function(a){null!=a&&(d.totalrecords=a.totalRows)},cache:!1,url:a.urlList},e=new $.jqx.dataAdapter(d,{beforeLoadComplete:function(a){for(var b in a)a[b].reg_dt=_SL.formatLcDate(a[b].reg_dt,"yyyyMMddHHmmss",_SL.formatDate.getLcPattern("ymdhms"));return a},formatData:function(b){var c,d={},e=$(a.formId).serializeArray();for(c in e)d[e[c].name]=e[c].value;return $.extend(b,d),b},loadError:function(a,b,c){alert(c)}});b.jqxGrid({keyboardnavigation:!1,enablebrowserselection:!0,source:e,width:"100%",pagesize:c.getValue(),virtualmode:!0,rendergridrows:function(a){return a.data},columns:[{text:"No",columntype:"number",width:40,cellsalign:"center",cellsrenderer:function(a,b,c,d){return $(d).text(c+1)[0].outerHTML}},{text:_SL.getMessage("FLD.COM.0148"),datafield:"user_id",width:"10%"},{text:_SL.getMessage("FLD.COM.0131"),datafield:"user_nm",width:"10%",cellsrenderer:function(a,b,c,d,e,f){var g='<img style="position: absolute; margin:-3px 0; width: 20px; height: 20px"';return""!=f.user_img&&void 0!=f.user_img?g+=' src="'+f.user_img+'"':g+=' src="/resources/imgs/threat/blackboard/default_user_icon.png"',g+=">",$(d).css("margin","0px"),$(d).html(g+'<button type="button" style="position: absolute; left: 27px;" class="btn-link">'+c+"</button>")[0].outerHTML}},{text:_SL.getMessage("FLD.COM.0147"),datafield:"role_nm",width:"12%"},{text:_SL.getMessage("FLD.COM.0008"),datafield:"group_nm",width:"12%"},{text:_SL.getMessage("FLD.COM.0150"),datafield:"mobile_no",cellsalign:"center",width:"12%"},{text:_SL.getMessage("FLD.COM.0151"),datafield:"mail_addr",width:"12%"},{text:"계정신청상태",datafield:"apply_status",cellsalign:"center",width:"12%"},{text:_SL.getMessage("FLD.COM.0075"),datafield:"reg_dt",cellsalign:"center"}]}),b.on("cellclick",function(b){if("user_nm"===b.args.datafield){var c=b.args.row.bounddata.user_id;g(a.urlForm+"?user_id="+c)}}),c.changeEvent()},f=function(){b.grid.jqxGrid("updatebounddata")},g=function(a){new ModalPopup(a,{height:650,onClose:function(){f()}})};return{init:d}}(),$(function(){slapp.user.list.init()});