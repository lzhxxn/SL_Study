"use strict";_SL.nmspc("user").listSel=function(){var a={urlList:gCONTEXT_PATH+"system/comuser_list_to_select.json",formId:"#searchComcodeListSel",gridId:"#gridComcodeListSel"},b={form:$(a.formId),grid:$(a.gridId)},c={userDataArr:[],userIdx:0},d=function(){return c},e=new slui.cookies,f=function(){e.init(a.gridId);var c=b.grid.parent().siblings(".grid-bottom").find(".btn-add");g(b.grid),b.form.find(".btn-submit").off().on("click",function(){b.grid.jqxGrid("gotopage",0),h()}),c.off().on("click",function(){$(this).data("after-close");i(-1)}),b.form.find(".form-input").keypress(function(a){13==a.keyCode&&(b.grid.jqxGrid("gotopage",0),h())})},g=function(d){var f={datatype:"json",datafields:[{name:"user_id",type:"string"},{name:"user_nm",type:"string"},{name:"mobile_no",type:"string"},{name:"mail_addr",type:"string"},{name:"role_nm",type:"string"},{name:"group_nm",type:"string"},{name:"cust_nm",type:"string"},{name:"reg_dt",type:"string"},{name:"line_token",type:"string"}],root:"rows",beforeprocessing:function(a){null!=a&&(f.totalrecords=a.totalRows)},cache:!1,url:a.urlList},g=new $.jqx.dataAdapter(f,{formatData:function(b){var c,d={},e=$(a.formId).serializeArray();for(c in e)d[e[c].name]=e[c].value;return $.extend(b,d),b},loadError:function(a,b,c){alert(c)}});d.jqxGrid({keyboardnavigation:!1,enablebrowserselection:!0,source:g,width:"100%",pagesize:e.getValue(),virtualmode:!0,selectionmode:"checkbox",enablehover:!1,rendergridrows:function(a){return a.data},columns:[{text:"No",columntype:"number",width:40,cellsalign:"center",cellsrenderer:function(a,b,c,d){return $(d).text(c+1)[0].outerHTML}},{text:_SL.getMessage("FLD.COM.0148"),datafield:"user_id"},{text:_SL.getMessage("FLD.COM.0131"),datafield:"user_nm",cellsrenderer:function(a,b,c,d,e,f){return $(d).html('<button type="button" class="btn-link">'+c+"</button>")[0].outerHTML}},{text:"Token",datafield:"line_token"},{text:_SL.getMessage("FLD.COM.0008"),datafield:"group_nm",width:"15%"},{text:_SL.getMessage("FLD.COM.0150"),datafield:"mobile_no",cellsalign:"center",width:"15%"},{text:_SL.getMessage("FLD.COM.0151"),datafield:"mail_addr",width:"20%"}]}),d.on("cellclick",function(a){if("user_nm"===a.args.datafield){var d=[];d.push(a.args.row.bounddata),c.userDataArr=d,b.grid.parent().siblings(".grid-bottom").find("[data-layer-close=true]").click()}}),e.changeEvent()},h=function(){b.grid.jqxGrid("updatebounddata")},i=function(){var a=[],d=b.grid.jqxGrid("selectedrowindexes"),e=b.grid.jqxGrid("getdisplayrows"),f=[];for(var g in e)for(var h=0,i=d.length;h<i;h++)d[h]==e[g].boundindex&&f.push(e[g].boundindex);if(f.length>0){for(var h in f){var j=b.grid.jqxGrid("getrowdata",f[h]);if(!j)break;a.push(j)}c.userDataArr=a,b.grid.parent().siblings(".grid-bottom").find("[data-layer-close=true]").click()}else _alert(_SL.getMessage("WRN.USR.0011"))};return{init:f,getParam:d}}(),$(function(){slapp.user.listSel.init()});