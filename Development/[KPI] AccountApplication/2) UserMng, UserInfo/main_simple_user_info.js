"use strict";_SL.nmspc("userInfo").userInfoForm=function(){var a={formId:"#formUserInfo",urlSelect:gCONTEXT_PATH+"main/main_simpleUserInfo.json",urlSave:gCONTEXT_PATH+"main/comuser_login_menu_id_update.do",urlPasswdExist:gCONTEXT_PATH+"main/comuser_passwd_inform.json"},b={form:$(a.formId),userId:$(a.formId+" [name=p_user_id]"),userNm:$(a.formId+" [name=user_nm]"),telNo:$(a.formId+" [name=tel_no]"),mobileNo:$(a.formId+" [name=mobile_no]"),slKeyId:$(a.formId+" [name=slKey]")},c={password:function(c){if(""!=$(c).val()){var d=(void 0===b.form.find("[name=user_id]").val()?b.form.find("[name='p_user_id']").val():b.form.find("[name=user_id]").val(),$(c).val()),e=this,f=0,g=0,h=!1,i=b.telNo.val(),j=b.mobileNo.val(),k=i.split("-"),l=j.split("-"),m=!1;$("body").requestData(a.urlPasswdExist,_SL.serializeMap(b.form),{async:!1,callback:function(a,b,c){if(!1===a.isDup)e.message=_SL.getMessage("WRN.USR.0021"),e.bValid=!1;else{var n=a.passwdInform.upper_case_yn,o=a.passwdInform.lower_case_yn,p=a.passwdInform.number_yn,q=a.passwdInform.special_character_yn,r=a.passwdInform.length,s=a.passwdInform.continum_yn,t=a.passwdInform.contichar_yn;if(/[가-힣]/.test(d))return e.message=_SL.getMessage("WRN.USR.0022"),void(e.bValid=!1);if("Y"===n&&!/[A-Z]/.test(d))return e.message=_SL.getMessage("WRN.USR.0023"),void(e.bValid=!1);if("Y"===o&&!/[a-z]/.test(d))return e.message=_SL.getMessage("WRN.USR.0024"),void(e.bValid=!1);if("Y"===p&&!/[\d]/.test(d))return e.message=_SL.getMessage("WRN.USR.0025"),void(e.bValid=!1);if("Y"===q&&!/[^A-Za-z0-9]/.test(d))return e.message=_SL.getMessage("WRN.USR.0026"),void(e.bValid=!1);if(0!=r&&d.length<r)return e.message=_SL.getMessage("WRN.USR.0019")+r+_SL.getMessage("WRN.USR.0020"),void(e.bValid=!1);for(var u=0;u<d.length;u++){var v=0,w=0;if(u>=1){if(isNaN(d.charAt(u-1))||isNaN(d.charAt(u)))continue;isNaN(d.charAt(u-1))||(v=d.charCodeAt(u-1)),isNaN(d.charAt(u))||(w=d.charCodeAt(u)),v-w==-1&&f++,v==w&&f++}}for(var u=0;u<d.length;u++){var v=0,w=0;if(u>=1){if(!isNaN(d.charAt(u-1))||!isNaN(d.charAt(u)))continue;isNaN(d.charAt(u-1))&&(v=d.charCodeAt(u-1)),isNaN(d.charAt(u))&&(w=d.charCodeAt(u)),v-w==-1&&g++,v==w&&g++}}if((0==f&&i||0==g&&i)&&(k.length>1?$.each(k,function(a,b){if(d.indexOf(b)>-1)return h=!0,!1}):d.indexOf(i)>-1&&(h=!0),!h&&j&&(l.length>1?$.each(l,function(a,b){if(d.indexOf(b)>-1)return m=!0,!1}):d.indexOf(j)>-1&&(m=!0))),0!=s&&f>=s)return e.message=_SL.getMessage("WRN.USR.0027")+s+_SL.getMessage("WRN.USR.0029"),void(e.bValid=!1);if(0!=t&&g>=t)return e.message=_SL.getMessage("WRN.USR.0028")+t+_SL.getMessage("WRN.USR.0029"),void(e.bValid=!1);if(h)return e.message=_SL.getMessage("WRN.USR.0030"),void(e.bValid=!1);if(m)return e.message=_SL.getMessage("WRN.USR.0031"),void(e.bValid=!1)}}})}}},d=function(){b.form.find(".btn-save").on("click",f)},e=function(){var c=b.userId.val(),d={user_id:c},e=function(c){c.passwd="",_SL.setDataToForm(c,b.form,{p_user_id:{converter:function(a,c){b.form.find("[name=p_user_id]").val(a),b.form.find("[name=user_id]").val(a)}},auth_ip:{converter:function(a,c){if(""!=a){var d=a.split(",")[0],e=a.split(",")[1];null!=e&&void 0!=e&&(d+="      "+e),b.form.find("[name=auth_ip]").val(d)}}}}),slui.attach.setTransformSelect(a.formId)};$("body").requestData(a.urlSelect,d,{callback:e})},f=function(){if(_SL.validate(b.form)){var c=b.form.find("[name=passwd]").val(),d=b.form.find("[name=re_passwd]").val();if(c!=d)return""!=d&&""==c?(_alert(_SL.getMessage("WRN.USR.0005")),void b.form.find("[name=passwd]").focus()):""!=c&&""==d?(_alert(_SL.getMessage("WRN.USR.0006")),void b.form.find("[name=re_passwd]").focus()):(_alert(_SL.getMessage("WRN.USR.0007")),void b.form.find("[name=re_passwd]").val("").focus());var e=($(this).data("after-close"),{passwd:b.form.find("[name=passwd]").val(),login_menu_id:b.form.find("[name=login_menu_id] :selected").val(),login_menu:b.form.find("[name=login_menu_id] :selected").data("value"),alarm_mode:b.form.find("[name=alarm_mode]:checked").val(),tel_no:b.form.find("[name=tel_no]").val(),mobile_no:b.form.find("[name=mobile_no]").val(),mail_addr:b.form.find("[name=mail_addr]").val(),line_token:b.form.find("[name=line_token]").val()});$("body").requestData(a.urlSave,$.extend({},e,{slKey:b.slKeyId.val()}),{callback:function(a,c,d){gDISPLAY_ALARM=b.form.find("[name=alarm_mode]:checked").val(),g(!0)}})}},g=function(a){a&&b.form.find("[data-layer-close=true]").click()};return{init:function(){d(),e(),$.extend(!0,_SL.validate.Validator,c),slui.attach.tooltip()}}}(),$(function(){slapp.userInfo.userInfoForm.init()});